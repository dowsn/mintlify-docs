---
title: 'Main'
description: 'Authentication controller for user management and login functionality'
---

## Overview

The `Authentication` class extends `MY_Controller` and provides functionality for user authentication, login, password reset, and user settings management.

## Methods

### getUser

Retrieves the currently logged-in user's data.

```php
static function getUser()
```

<ResponseField name="Returns" type="object|null">
  User data object if a user is logged in, null otherwise.
</ResponseField>

### showLogin

Displays the login page.

```php
public function showLogin($errormessage = '')
```

<Param name="errormessage" type="string">
  Optional error message to display on the login page.
</Param>

### checkLogin

Checks if a user is currently logged in.

```php
public function checkLogin()
```

<ResponseField name="Returns" type="json">
  JSON object containing login status and menu text.
</ResponseField>

### loginUser

Processes user login attempt.

```php
public function loginUser()
```

<Note>
  This method handles form submission from the login page and redirects the user based on authentication results.
</Note>

### resetPw

Initiates the password reset process for a given email address.

```php
public function resetPw()
```

<Note>
  This method sends a password reset email to the user if the email address is valid and associated with an account.
</Note>

### logout

Logs out the current user and destroys the session.

```php
public function logout()
```

### usersettings

Displays the user settings page.

```php
public function usersettings($success = false)
```

<Param name="success" type="boolean">
  Indicates whether to display a success message.
</Param>

### updateUser

Updates user information based on form submission.

```php
public function updateUser()
```

<Note>
  This method handles form validation and updates user data, including password if provided.
</Note>

## Helper Methods

### password_check

Validates password strength.

```php
public function password_check($password)
```

<Param name="password" type="string">
  The password to validate.
</Param>

<ResponseField name="Returns" type="boolean">
  True if the password meets the required criteria, false otherwise.
</ResponseField>

### email_exists

Checks if an email address exists in the newsletter subscribers list.

```php
public function email_exists($email)
```

<Param name="email" type="string">
  The email address to check.
</Param>

<ResponseField name="Returns" type="boolean">
  True if the email exists, false otherwise.
</ResponseField>

## Dependencies

- This class relies on the `Authentication_model` for database operations.
- PHPMailer is used for sending password reset emails.
- A custom `PasswordHash` library is used for password hashing.

<Note>
  Make sure to configure the email settings properly for the password reset functionality to work correctly.
</Note>