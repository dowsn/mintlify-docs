---
title: 'Format_Frontend'
description: 'A trait containing various formatting and utility functions for frontend operations'
---

The `Format_Frontend` trait provides a collection of utility functions for handling dates, timezones, string manipulations, PDF text extraction, and JSON operations. This trait is designed to be used in frontend-related classes to enhance their functionality.

## Date Formatting

### getCorrectDateArticle

Formats a given date according to the current language settings.

<CodeGroup>
```php
public function getCorrectDateArticle($date)
```
</CodeGroup>

<Param name="date" type="string">
  The date to be formatted
</Param>

<ResponseField name="return" type="string">
  The formatted date string
</ResponseField>

This function uses the `IntlDateFormatter` to format the date based on the current language setting. It supports both German (de_DE) and English (en_US) locales.

## Timezone Handling

### timezone

Sets the user's timezone in the session.

<CodeGroup>
```php
public function timezone()
```
</CodeGroup>

This function reads the timezone from the `$_GET['time']` parameter and sets it in the user's session.

## String Manipulation

### decodeFlate

Decompresses a string using gzip compression.

<CodeGroup>
```php
function decodeFlate($input)
```
</CodeGroup>

<Param name="input" type="string">
  The compressed string to decompress
</Param>

<ResponseField name="return" type="string">
  The decompressed string
</ResponseField>

### pdf2text

Extracts text content from a PDF file.

<CodeGroup>
```php
function pdf2text($filename)
```
</CodeGroup>

<Param name="filename" type="string">
  The path to the PDF file
</Param>

<ResponseField name="return" type="string">
  The extracted text content from the PDF
</ResponseField>

This function reads the PDF file, processes its objects and streams, and extracts the text content.

<Note>
  This function relies on several helper functions to process PDF content, including `getObjectOptions`, `getDecodedStream`, `getDirtyTexts`, `getCharTransformations`, and `getTextUsingTransformations`.
</Note>

## PDF Content Processing

### getTextUsingTransformations

Analyzes text blocks from a PDF, taking into account character transformations.

<CodeGroup>
```php
function getTextUsingTransformations($texts, $transformations)
```
</CodeGroup>

<Param name="texts" type="array">
  An array of text blocks extracted from the PDF
</Param>

<Param name="transformations" type="array">
  An array of character transformations
</Param>

<ResponseField name="return" type="string">
  The processed and transformed text content
</ResponseField>

### decodeAsciiHex

Decodes ASCII hexadecimal encoded content.

<CodeGroup>
```php
function decodeAsciiHex($input)
```
</CodeGroup>

<Param name="input" type="string">
  The ASCII hexadecimal encoded string
</Param>

<ResponseField name="return" type="string">
  The decoded string
</ResponseField>

### decodeAscii85

Decodes ASCII85 encoded content.

<CodeGroup>
```php
function decodeAscii85($input)
```
</CodeGroup>

<Param name="input" type="string">
  The ASCII85 encoded string
</Param>

<ResponseField name="return" type="string">
  The decoded string
</ResponseField>

### getDecodedStream

Decodes a stream of data based on the provided options.

<CodeGroup>
```php
function getDecodedStream($stream, $options)
```
</CodeGroup>

<Param name="stream" type="string">
  The stream of data to decode
</Param>

<Param name="options" type="array">
  An array of decoding options
</Param>

<ResponseField name="return" type="string">
  The decoded stream data
</ResponseField>

### getDirtyTexts

Extracts text content from text containers in a PDF.

<CodeGroup>
```php
function getDirtyTexts(&$texts, $textContainers)
```
</CodeGroup>

<Param name="texts" type="array">
  Reference to an array where extracted texts will be stored
</Param>

<Param name="textContainers" type="array">
  An array of text containers from the PDF
</Param>

### getCharTransformations

Extracts character transformations from a PDF stream.

<CodeGroup>
```php
function getCharTransformations(&$transformations, $stream)
```
</CodeGroup>

<Param name="transformations" type="array">
  Reference to an array where character transformations will be stored
</Param>

<Param name="stream" type="string">
  The PDF stream containing transformation data
</Param>

## JSON Processing

### convertJSON

Loads and processes a JSON file, then displays the data in a view.

<CodeGroup>
```php
public function convertJSON()
```
</CodeGroup>

This function reads a JSON file from `items/frontend/js/json.json`, decodes it, and passes the data to the `frontend/json` view.

## Object Processing

### getObjectOptions

Extracts options from a PDF object string.

<CodeGroup>
```php
function getObjectOptions($object)
```
</CodeGroup>

<Param name="object" type="string">
  The PDF object string
</Param>

<ResponseField name="return" type="array">
  An array of extracted options
</ResponseField>

This function parses the PDF object string and extracts key-value pairs of options.